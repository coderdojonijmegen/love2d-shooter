<html>
<head>
<title>L&ouml;ve - 2D shooter</title>
<link rel="icon" type="image/x-icon" href="https://coderdojonijmegen.github.io/instructies_voor_mentoren/favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Noto+Sans"
	rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://coderdojonijmegen.github.io/instructies_voor_mentoren/style.css">
</head>
<body>
	<div class="content">

		<h1>L&ouml;ve - 2D shooter</h1>
		
		<div class="gecentreerd"><img src="images/image1.png" /></div>

		<div id="inhoud">
			<h2>Inhoud</h2>
			<ul class="inhoud">
				<li><a href="#introductie">Introductie</a></li>
				<li><a href="#benodigdheden">Benodigdheden</a></li>
				<li><a href="#stappen">Stappen</a></li>
				<li><a href="#conclusie">Conclusie</a></li>
				<li><a href="#vervolg">Vervolg</a></li>
			</ul>
		</div>

		<div id="introductie">
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h2>Introductie</h2>
			<p>
			In deze Dojo gaan we aan de slag met <a href="https://love2d.org/">L&ouml;ve</a>. 
			Dat is een gratis 2D game engine gebaseerd op de script taal <a href="https://lua.org">Lua</a>.
			</p><p>
			We gaan een eenvoudige shooter maken. Deze instructie is een vertaling en bewerking van een 
			<a href="http://osmstudios.com/tutorials/your-first-love2d-game-in-200-lines-part-1-of-3">tutorial</a> gemaakt door <strong>>_ OSM</strong>STUDIOS.			
			</p>
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Wat leer je?</h3>
			<p>
			Tijdens de Dojo's over Scratch hebben jullie kennis gemaakt met variabelen en functies (blokken). Daar gaan we mee verder.
			</p><p>
			In Scratch kun je met drag-and-drop variabelen en functies combineren tot een programma, 
			maar bij de meeste programmeertalen wordt het programma in tekst geschreven. Dat is ook het geval bij L&ouml;ve. We gaan dus typen.
			</p><p>
			Om het geen type sessie te laten zijn, zijn een aantal functies, net als bij Scratch, al voor jullie gemaakt. 
			Je hoeft ze dus niet helemaal zelf meer te maken. Je hoeft ze alleen maar te gebruiken.
			</p>
		</div>

		<div id="benodigdheden">
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h2>Benodigdheden</h2>
			<p>
			Om deze instructie te kunnen volgen, moet je L&ouml;ve en een goede editor ge&iuml;nstalleerd hebben. 
			Verder moet je wat code downloaden om verder op te bouwen, maar dit wordt in stap 0 uitgelegd.
			</p> 
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Installatie L&ouml;ve</h3>
			<p>
			Hopelijk heb je de installatie al voorbereid na het ontvangen van de uitnodiging voor deze Dojo. 
			Als dat zo is, kun je dit hoofdstukje overslaan en doorgaan naar Stap 1.
			</p>
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Windows</h3>
			<p>
			L&ouml;ve is op Windows gemakkelijk te installeren via &eacute;&eacute;n van de installers. 
			Als alternatief kun je kiezen voor &eacute;&eacute;n van de zipbestanden en deze op een gewenste locatie unzippen. 
			Maak het jezelf gemakkelijk door L&ouml;ve op een eenvoudig te onthouden plek te installeren, bijvoorbeeld in de map
			</p> 
			<code>c:\love\</code>
			<p>
			Zie de <a href="https://love2d.org/#download">L&ouml;ve download pagina</a> voor de installatie bestanden.<br>
			Als je twijfelt tussen de 32- of 64-bits versie, kun je voor de zekerheid kiezen voor 32-bits versie of gewoon even 
			<a href="https://support.microsoft.com/nl-nl/help/13443/windows-which-operating-system">checken</a> welke versie je hebt.
			</p>
			<h3>Mac</h3>
			<p>
			<a href="https://love2d.org/%23download">Download</a> het zip bestand voor Mac en unzip het op de gewenste locatie.
			</p>
			<h3>Linux</h3>
			<p>
			Voor Ubuntu kun je kiezen voor het toevoegen van de <a href="https://launchpad.net/~bartbes/%2Barchive/ubuntu/love-stable">L&ouml;ve PPA</a> 
			of voor de installatie van &eacute;&eacute;n van de .deb bestanden.
			</p>
			<h3>Tekst editor</h3>
			<p>
			Als je gaat programmeren is het handig om een editor te installeren met meer mogelijkheden dan 'kladblok'. <br>
			<a href="https://www.sublimetext.com/3">Sublime Text</a> snapt Lua en dus L&ouml;ve. 
			Als alternatief kun je kiezen voor <a href="https://notepad-plus-plus.org/download/">Notepad++</a>.
			</p>
		</div>

		<div id="stappen">
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h2>Stappen</h2>
			<p>
			<strong>LET OP</strong>: de regels in de voorbeeld code die beginnen met <code><span class="commentaar">--</span></code> 
			en groen gekleurd zijn, worden niet uitgevoerd, 
			maar zijn commentaar in de code. Het commentaar is bedoeld om aan te geven wat de code zou moeten doen. 
			Je hoeft commentaar niet in te typen om het programma succesvol te kunnen laten uitvoeren.
			</p><p>
			De <code>donkerblauwe code</code> staat al in het bestand of heb je al eerder toegevoegd. De nieuwe code die je in een stap
			moet toevoegen is <code><span class="nieuwe_code">rood</span></code> gekleurd. 
			</p><p>
			TIP: de onderstaande stukken code hoef je niet over te typen. Je kunt ze natuurlijk gewoon copy-pasten in je editor.
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 0: installatie voorbereidde code</h3>
			<p>
			<ol>
				<li>Download the code van GitHub: 
				<a href="https://github.com/coderdojonijmegen/love2d-shooter/archive/master.zip">L&ouml;ve 2D shooter code</a></li>
				<li>De zip-file bevat een <code>src/</code> folder. Kopieer de inhoud daarvan naar <code>c:\games\shooter</code></li>
				<li>Om de voorbereidde code uit te voeren, druk je op de Windows knop en typ je 'cmd'. Je krijgt dan een
				zwart venster. Typ dan <code>cd c:\games\shooter</code> om naar de folder te gaan waar je de code hebt neergezet.
				Typ tenslotte <code>c:\love\love.exe .\</code> om het programma te starten. Als alles goed gaat, krijg je
				een zwart venster.</li>
			</ol>
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 1: teken het vliegtuig van de speler</h3>
			<p>
			In deze stap doen we het volgende:
			<ol>
				<li>We laden het plaatje van het vliegtuig van de speler</li>
				<li>Tekenen het plaatje op het scherm</li>
			</ol>
			</p><p>
			Open <code>main.lua</code> in je tekst editor en type het volgende:
			</p>
	<code>
<span class="commentaar">	-- variabele om het plaatje in op te slaan</span>
<span class="nieuwe_code">	spelersVliegtuig = nil</span>
	
	function love.load(arg)
<span class="commentaar">	  -- laadt het plaatje in de variabele</span>
<span class="nieuwe_code">	  spelersVliegtuig = love.graphics.newImage('plaatjes/spelersVliegtuig.png')</span>
	end
	</code>
			<p>
			En vervolgens om op het scherm te tekenen:
			</p>
	<code>
	function love.draw(dt)
<span class="commentaar">	  -- teken het plaatje op het scherm</span>
<span class="nieuwe_code">	  love.graphics.draw(spelersVliegtuig, 100, 100)</span>
	end
	</code>
			<p>
			Start je programmaatje en zie het resultaat:
			</p>
			<div class="gecentreerd"><img src="images/image9.png" /></div>
			<div style="border: 1px solid gray; margin-top: 10px; padding: 15px; background-color: #FAFAFA;">
				<h3 style="text-align: center;">x en y as</h3>
				<div class="gecentreerd"><img src="images/image6.png" /></div>
				<p>
				In de code hebben we bij het aanroepen van functie <code>love.graphics.draw</code> 
				twee keer het getal 100 gebruikt. Deze worden gebruikt om de positie van het 
				plaatje in het scherm te bepalen. Daarbij is positie 0,0 links bovenin. 
				Bij 100,100 is het plaatje dus 100 stappen naar beneden en 100 naar rechts verschoven ten opzichte van 0,0.<br>
				Voor de horizontale positie wordt vaak variabele naam x gebruikt en voor de verticale positie y.
				</p><p>
				In Scratch komen x en y waarden voor de plaats van een Sprite ook terug. Hieronder staat Scratch op x = 31 en y = -36
				</p>			
				<div class="gecentreerd"><img src="images/image8.png" /></div>
			</div>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 2: eigenschappen van de speler</h3>
			<p>
			Het vliegtuig van de speler staat nu nog stil op positie 100,100, maar zal natuurlijk van links naar rechts gaan bewegen als we wat verder zijn. 
			Je zou kunnen zeggen dat de speler een aantal eigenschappen heeft:
			<ul>
				<li>het plaatje</li>
				<li>de positie</li>
			</ul>
			Om die informatie bij elkaar te houden, vervangen we variabele <code>spelersVliegtuig</code> door een nieuwe variabele waarin 
			meerdere eigenschappen opgeslagen kunnen worden:
			</p>
	<code>
<span class="commentaar">	-- variabele om eigenschappen van de speler in op te slaan</span>
<span class="nieuwe_code">	speler = { x = 200, y = 560, plaatje = nil }</span>
	
	function love.load(arg)
<span class="commentaar">	  -- laadt het plaatje in eigenschap plaatje van de variabele speler</span>
<span class="nieuwe_code">	  speler.plaatje = love.graphics.newImage('plaatjes/spelersVliegtuig.png')</span>
	end
	</code>
			<p>
			Het tekenen van het plaatje moet ook aangepast worden, zodat de nieuwe variabele met spelers eigenschappen gebruikt worden:
			</p>
	<code>
	function love.draw(dt)
<span class="commentaar">	  -- teken het plaatje op het scherm</span>
<span class="nieuwe_code">	  love.graphics.draw(speler.plaatje, speler.x, speler.y)</span>
	end
	</code>
			<p>
			Start opnieuw je programma en zie dat het vliegtuig nu onder in het venster staat. 
			De wijzigingen die je hebt gemaakt zijn een voorbereiding om plaatje te kunnen laten bewegen.
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 3: de speler bewegen</h3>
			<p>
			Je programma toont nu alleen een stilstaand plaatje. Dat is natuurlijk niet erg interessant. 
			In deze stap ga je het plaatje laten bewegen.
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h4>Bewegen met pijltjes</h4>
			<p>
			Om het plaatje te horizontaal te laten bewegen, moet de <code>speler.x</code> eigenschap worden aangepast. 
			De waarde van <code>speler.x</code> moet kleiner worden om naar links te bewegen en groter om naar 
			rechts te bewegen. Je kunt dit ook eenvoudig uitproberen door de waarde 200 in de code groter 
			of kleiner te maken en je programma te starten.
			</p><p>
			Om het plaatje te laten bewegen terwijl het programma draait, moet het programma gaan reageren 
			op toetsen van je toetsenbord. De pijl naar links zorgt voor een beweging naar links en de 
			pijl naar rechts voor een beweging naar rechts:
			</p>
			<div class="gecentreerd"><img src="images/image16.png" /></div>
	<code>
	function love.update(dt)
<span class="commentaar">	  -- als pijltje naar links wordt ingedrukt</span>
<span class="nieuwe_code">	  if love.keyboard.isDown('left') then</span>
	
<span class="commentaar">	    -- dan doe een stap naar links</span>
<span class="nieuwe_code">	    speler.x = speler.x - 1</span>
	
<span class="commentaar">	  -- als pijltje naar rechts wordt ingedrukt</span>
<span class="nieuwe_code">	  elseif love.keyboard.isDown('right') then</span>
	
<span class="commentaar">	    -- dan doe een stap naar rechts</span>
<span class="nieuwe_code">	    speler.x = speler.x + 1</span>
<span class="nieuwe_code">	  end</span>
	end
	</code>
			<p>
			Als je voor het eerst naar programmeercode kijkt ziet het bovenstaande er ingewikkeld uit, 
			maar vergelijk het eens met het bewegen met pijltjes in Scratch. <code>love.update(dt)</code>
			wordt steeds opnieuw uitgevoerd en is daarom vergelijkbaar met de 'herhaal' in Scratch en 'if ... then' 
			is gelijk aan 'als ... dan' in Scratch.
			</p><p>
			Als je de programmeercode hebt ingevoerd, kun je het programma starten om uit te proberen of het werkt.
			</p>
			<ul>
				<li>Probeer ook eens een andere stapgrootte dan 1. Doet dat wat je ervan verwacht?
				Wat gebeurt er als je er een negatief getal van maakt?</li>
				<li>Kun je de code aanpassen, zodat je ook naar boven en beneden kunt bewegen 
				(gebruik toetsen 'up' voor naar boven en 'down' voor naar beneden)?</li>
			</ul>
			<p>			
			Wat gebeurt er als je bijvoorbeeld het pijltje naar rechts lang ingedrukt houdt?
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h4>Stoppen bij de rand</h4>
			<p>
			Om te voorkomen dat het plaatje onzichtbaar wordt, moeten we voorkomen dat het verder beweegt 
			als het aan de randen van het venster komt. Aan de linker kant is dat makkelijk: beweeg niet 
			verder als <code>speler.x</code> gelijk is aan 0. In code ziet dat er als volgt uit:
			</p>
	<code>
<span class="commentaar">	-- als pijltje naar links ingedrukt</span>
	if love.keyboard.isDown('left') then
	
<span class="commentaar">	  -- en linker rand is nog niet bereikt</span>
<span class="nieuwe_code">	  if speler.x > 0 then</span>
	
<span class="commentaar">	    -- dan doe een stap naar links</span>
	    speler.x = speler.x - 1
	
<span class="nieuwe_code">	  end</span>
    </code><p>
			Aan de rechter zijde is dat lastiger. Daar hangt de maximale 'x' af van de breedte van het 
			venster. De maximale waarde voor x is gelijk aan de breedte van het venster, of <code>xRechterRand()</code>:
			</p>
			<div class="gecentreerd"><img src="images/image14.png" /></div>
	<code>
<span class="commentaar">	-- als pijltje naar rechts ingedrukt</span>
	elseif love.keyboard.isDown('right') then
	
<span class="commentaar">	  -- en de rechter rand is nog niet bereikt</span>
<span class="nieuwe_code">	  if speler.x < xRechterRand() then</span>
	
<span class="commentaar">	    -- dan doe een stap naar rechts</span>
	    speler.x = speler.x + 1
	
<span class="nieuwe_code">	  end</span>
	end
	</code><p>
			Pas de code die je eerder bij stap 3 (bewegen met pijltjes) hebt geschreven aan, zodat je stopt bij de 
			rand. Controleer ook of het plaatje nu niet aan de rechterkant verdwijnt. Voor de duidelijkheid hebben 
			we de Scratch code ook aangepast en bijgevoegd (zie plaatje rechts).
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 4: de vijand</h3>
			<p>
			Het spel draait natuurlijk niet alleen om het heen en weer bewegen van een vliegtuigje. 
			Er is ook een vijand. In deze stap gaan we vijanden maken.
			</p><p>
			We beginnen met het tekenen van &eacute;&eacute;n vijand. Daarvoor voegen we &eacute;&eacute;n regel toe 
			(bijna bovenaan je code) en we voegen een regel code toe aan de <code>love.load()</code> en <code>love.draw()</code> functies:
			</p>
			<code>
<span class="commentaar">	-- variabelen om eigenschappen van de speler en vijand in op te slaan</span>
	speler = { x = 200, y = 560, plaatje = nil }
<span class="nieuwe_code">	vijand = { x = 200, y = 0, plaatje = nil }</span>
	
	function love.load(arg)

<span class="commentaar">	  -- laadt het plaatje in eigenschap plaatje van de variabele speler</span>
	  speler.plaatje = love.graphics.newImage('plaatjes/spelersVliegtuig.png')
<span class="nieuwe_code">	  vijand.plaatje = love.graphics.newImage('plaatjes/vijandsVliegtuig.png')</span>
	end
	
	function love.draw(dt)

<span class="commentaar">	  -- teken het plaatje op het scherm</span>
	  love.graphics.draw(speler.plaatje, speler.x, speler.y)
<span class="nieuwe_code">	  love.graphics.draw(vijand.plaatje, vijand.x, vijand.y)</span>
	end
			</code><p>
			Probeer bovenstaande code uit.
			</p><p>
			Er is nu &eacute;&eacute;n vijand en deze staat recht tegenover de speler. Een stilstaande vijand is niet zo 
			interessant, dus we laten 'm naar de speler bewegen. Dat kan vrij eenvoudig door het volgende aan de code 
			toe te voegen aan je <code>love.update(dt)</code> functie:
			</p><code>
	function love.update(dt)

<span class="commentaar">	  -- laat de vijand een stapje naar beneden doen</span> 
<span class="nieuwe_code">	  vijand.y = vijand.y + 1</span>
			</code><p>
			Bovenstaande code werkt hetzelfde als het verplaatsen van de speler. Nu bewegen we alleen wel 
			verticaal (van boven naar beneden). Daardoor moeten we y in plaats van x veranderen. De positie 
			van de vijand wordt steeds met 1 stapje naar beneden verzet. Zo beweegt de vijand naar de speler toe.
			</p><p>
			Om het plaatje van buiten het venster tevoorschijn te laten komen, moet de y positie aangepast worden 
			naar -100. Pas de code bovenin je script aan door y = 0 te veranderen naar y = -100:
			</p><code>
<span class="nieuwe_code">	vijand = { x = 200, y = -100, plaatje = nil }</span>
			</code><p>
			Onder aan het scherm vliegt de vijand het venster uit en is dan verdwenen. Het is natuurlijk leuker 
			als er aan de bovenkant een nieuwe vijand verschijnt. Daarvoor moet je, net als bij het bewegend maken 
			van de vijand, onderstaande code toevoegen aan <code>love.update(dt)</code>:
			</p><code>
<span class="commentaar">	-- als de vijand de onderrand heeft bereikt</span>
<span class="nieuwe_code">	if vijand.y > yOnderRand() then</span>
	
<span class="commentaar">	  -- verplaats het dan uit het zicht boven het venster</span>
<span class="nieuwe_code">	  vijand.y = -100</span>
	
<span class="nieuwe_code">	end</span>
			</code><p>
			Om je te helpen met het begrijpen van de code: het verplaatsen van de vijand in 
			Scratch zou er ongeveer zo uitzien:
			</p>
			<div class="gecentreerd"><img src="images/image18.png" /></div>
			<p>
			Om het nog interessanter te maken, zou het leuk zijn als de vijand niet steeds op dezelfde plaats 
			van boven naar beneden beweegt. De waarde van <code>vijand.x</code> (horizontale positie) zou iedere keer 
			anders moeten zijn. Gebruik daarvoor de functie <code>xWillekeurig()</code>:
			</p><code>
<span class="commentaar">	-- als de vijand de onderrand heeft bereikt</span>
<span class="nieuwe_code">	if vijand.y > yOnderRand() then</span>
	
<span class="commentaar">	  -- verplaats het dan uit het zicht boven het venster</span>
<span class="nieuwe_code">	  vijand.y = -100</span>
	
<span class="commentaar">	  -- en zet de horizontale positie naar een willekeurige waarde</span>
<span class="nieuwe_code">	  vijand.x = xWillekeurig()</span>
	
<span class="nieuwe_code">	end</span>
			</code><p>
			Wat je in Scratch zo zou doen:
			</p>
			<div class="gecentreerd"><img src="images/image13.png" /></div>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 5: meerdere vijanden</h3>
			<p>
			We hebben nu een enkele vijand. Die is natuurlijk makkelijk te ontwijken. Spannender wordt het, 
			als we er meerdere hebben. Daarvoor moeten we het &eacute;&eacute;n en ander aanpassen, de code 
			die je eerder hebt geschreven voor &eacute;&eacute;n vijand, gaan we vervangen met code voor 
			meerdere vijanden. Je moet hier en daar dus code verwijderen!
			</p><p>
			Allereerst hebben we een lijst met vijanden nodig, die voegen we bovenaan de code toe, bij 'speler'. 
			Variabelen staan vaak bovenaan in code:
			</p><code>
<span class="commentaar">	-- variabelen om eigenschappen van de speler in op te slaan</span>
	speler = { x = 200, y = 560, plaatje = nil }
	
<span class="commentaar">	-- lijst om vijanden in op te slaan</span>
<span class="nieuwe_code">	vijanden = {}</span>
			</code><p>
			Een andere variabele die we nodig hebben is het plaatje van de vijand. Eerder deden we dat in de 
			functie <code>love.draw(dt)</code> met <code>speler.plaatje</code>. Die regel mag nu verwijderd 
			worden en in plaats daarvan zetten we bij de variabelen 'speler' en 'vijanden' ook het plaatje voor de vijand:
			</p><code>
<span class="commentaar">	-- laad het plaatje van de vijand</span>
<span class="nieuwe_code">	vijandPlaatje = love.graphics.newImage('plaatjes/vijandsVliegtuig.png')</span>
			</code><p>
			De vijanden moeten ook getekend worden, zorg ervoor dat jouw <code>love.draw(dt)</code> functie eruit 
			ziet zoals hieronder:
			</p><code>
	function love.draw(dt)
	
<span class="commentaar">	  -- teken het plaatje op het scherm</span>
	  love.graphics.draw(speler.plaatje, speler.x, speler.y)
	
<span class="commentaar">	  -- teken de vijanden in de lijst</span>
<span class="nieuwe_code">	  tekenVijanden(vijanden)</span>
	
	end
			</code><p>
			Er worden alleen vijanden getekend die bestaan, daarom moeten vijanden ook aangemaakt worden:
			</p><code>
	function love.update(dt)
	
<span class="nieuwe_code">	  maakNieuweVijand(vijanden)</span>
			</code><p>
			In de vorige stap hebben we de vijand laten bewegen. Deze code moeten we nu voor iedere vijand in de lijst uitvoeren:
			</p><code>
	function love.update(dt)
	
<span class="nieuwe_code">	  maakNieuweVijand(vijanden) </span>
	
<span class="commentaar">	  -- voor elke vijand in de lijst</span>  
<span class="nieuwe_code">	  for index, vijand in ipairs(vijanden) do</span>
	
<span class="commentaar">	    -- laat de vijand een stapje naar beneden doen</span>  
<span class="nieuwe_code">	    vijand.y = vijand.y + 2</span>
	
<span class="commentaar">	    -- als de vijand de onderrand heeft bereikt</span>
<span class="nieuwe_code">	    if vijand.y > yOnderRand() then</span>
	
<span class="commentaar">	      -- verwijder de vijand</span>
<span class="nieuwe_code">	      table.remove(vijanden, index)</span>
	
<span class="nieuwe_code">	    end</span>
<span class="nieuwe_code">	  end</span>
			</code><p>
			Het maken en verwijderen van vijanden zoals we dat hierboven doen is in Scratch heel lastig. 
			We geven daarom geen voorbeeld van het bovenstaande in Scratch. Waar het kan doen we dat wel.
			</p><p>
			Voer het programma uit. Als het goed is ziet het eruit als onderstaande plaatje:
			</p>
			<div class="gecentreerd"><img src="images/image3.png" /></div>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 6: de vijand ontwijken</h3>
			<p>
			Als de speler een vijand raakt, is het spel afgelopen. Om te zien of de speler een vijand geraakt 
			heeft, hebben we functie <code>spelerHeeftVijandGeraakt()</code>.
			</p><p>
			Als het resultaat van de functie waar (true) is, dan moet het spel gestopt worden.
			</p><p>
			Voeg daarvoor de volgende code toe aan functie <code>love.update(dt)</code>:
			</p>
			<div class="gecentreerd"><img src="images/image2.png" /></div>
			<code>
<span class="commentaar">	-- als de speler een vijand geraakt heeft</span>
<span class="nieuwe_code">	if spelerHeeftVijandGeraakt() then</span>
	
<span class="commentaar">	  -- is het spel afgelopen</span>
<span class="nieuwe_code">	  spelIsAfgelopen = true</span>
	
<span class="nieuwe_code">	end</span>
			</code><p>	
			In variabele <code>spelIsAfgelopen</code> wordt bijgehouden of het spel nog loopt of al is afgelopen. 
			Als het is afgelopen, wordt de speler niet langer getekend. Pas daarvoor functie <code>love.draw(dt)</code>
			aan door het tekenen van de speler binnen een if statement te plaatsen:
			</p><code>
	function love.draw(dt)
	
<span class="commentaar">	  -- als het spel nog niet is afgelopen</span>
<span class="nieuwe_code">	  if spelIsAfgelopen == false then</span>
	
<span class="commentaar">	    -- teken het plaatje op het scherm</span>
	    love.graphics.draw(speler.plaatje, speler.x, speler.y)
	
<span class="nieuwe_code">	  end</span>
			</code><p>
			In Scratch zou het er zo uitzien:
			</p>
			<div class="gecentreerd"><img src="images/image11.png" /></div>
			<p>
			Vergeet niet om bovenaan het bestand de variabele toe te voegen:
			</p><code>
<span class="nieuwe_code">	spelIsAfgelopen = false</span>
			</code><p>
			Als je nu het spel speelt, wordt het spelersvliegtuig niet meer getekend als je een vijand hebt geraakt.
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 7: schieten</h3>
			<p>
			De stap schieten lijkt op een combinatie van stappen 4 en 5..
			</p><p>
			Er moet een lijst worden toegevoegd voor de kogels:
			</p><code>
<span class="commentaar">	-- variabelen om eigenschappen van de speler in op te slaan</span>
	speler = { x = spelerX, y = spelerY, plaatje = nil }
	
<span class="commentaar">	-- lijst om vijanden in op te slaan</span>
	vijanden = {}
	
<span class="commentaar">	-- lijst om kogels in op te slaan</span>
<span class="nieuwe_code">	kogels = {}</span>
			</code><p>
			Het plaatje van de kogel moet worden geladen:
			</p><code>
<span class="commentaar">	-- laad het plaatje van de vijand</span>
	vijandPlaatje = love.graphics.newImage('plaatjes/vijandsVliegtuig.png')
	
<span class="commentaar">	-- laad het plaatje van de kogel</span>
<span class="nieuwe_code">	kogelPlaatje = love.graphics.newImage('plaatjes/kogel.png')</span>
			</code><p>
			En het plaatje moet worden getekend, dat doe je in de <code>love.draw(dt)</code> functie:
			</p><code>
<span class="commentaar">	-- teken de kogels in de lijst</span>
<span class="nieuwe_code">	tekenKogels(kogels)</span>
			</code><p>
			In tegenstelling tot de vijanden, worden nieuwe kogels alleen aangemaakt als de speler de 
			spatiebalk indrukt. In de <code>love.update(dt)</code> functie voeg je het volgende toe:
			</p><code>
    if spelIsAfgelopen == false then

<span class="commentaar">	-- als de spatiebalk wordt ingedrukt</span>
<span class="nieuwe_code">	if love.keyboard.isDown('space') then</span>
	
<span class="commentaar">	  -- schiet dan</span>
<span class="nieuwe_code">	  maakNieuweKogel(kogels, speler)</span>

<span class="nieuwe_code">	end</span>

        maakNieuweVijand(vijanden)  
			</code>
			<p>
			Als je de code tot nu toe uitprobeert, krijg je wel een kogels te zien, maar die bewegen niet, 
			het ziet eruit als het plaatje rechts.
			</p>
			<div class="gecentreerd"><img src="images/image12.png" /></div>
			<p>
			Aan de <code>love.update(dt)</code> functie moet nog wat extra code worden toegevoegd om de kogels 
			te laten bewegen. Elke kogel in de lijst laten we telkens vier stappen omhoog gaan en als een kogel 
			uit beeld verdwijnt, halen we de kogel ook uit de lijst:
			</p><code>
    if spelIsAfgelopen == false then
<span class="commentaar">        -- als de spatiebalk wordt ingedrukt</span>
        if love.keyboard.isDown('space') then
<span class="commentaar">            -- schiet dan</span>
            maakNieuweKogel(kogels, speler)
        end

<span class="commentaar">        -- voor elke kogel in de lijst</span>
<span class="nieuwe_code">        for index, kogel in ipairs(kogels) do</span>

<span class="commentaar">            -- beweeg de kogel naar boven</span>
<span class="nieuwe_code">            kogel.y = kogel.y - (2 * stapGrootte)</span>

<span class="commentaar">            -- als de kogel de bovenrand heeft bereikt</span>
<span class="nieuwe_code">            if kogel.y < -20 then</span>
<span class="commentaar">                -- verwijder het uit de lijst</span>
<span class="nieuwe_code">                table.remove(kogels, index)</span>
<span class="nieuwe_code">            end</span>
<span class="nieuwe_code">        end</span>

        maakNieuweVijand(vijanden)  
			</code><p>
			Dat ziet er beter uit!
			</p>
			<div class="gecentreerd"><img src="images/image15.png" /></div>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 8: raken en scoren</h3>
			<p>
			De vijanden vliegen, je kunt je vliegtuig richten en je kunt schieten. Maar je schoten raken 
			nog niets en de vijanden vliegen door. Daar gaan we in deze stap wat aan doen.
			</p><p>
			Functie <code>kogelHeeftVijandGeraakt()</code> laat ons weten of een kogel een vijand geraakt 
			heeft. Ook verwijderd deze functie de geraakte vijand en de kogel:
			</p><code>
<span class="commentaar">	-- als de kogel een vijand geraakt heeft</span>
<span class="nieuwe_code">	if kogelHeeftVijandGeraakt() then</span>
	
<span class="commentaar">	  -- heb je een punt gescoord</span>
<span class="nieuwe_code">	  score = score + 1</span>
	
<span class="nieuwe_code">	end</span>
			</code><p>
			Voeg bovenstaande code toe aan <code>love.update(dt)</code>. Om de score in op te slaan, moet je ook nog 
			een variabele aanmaken boven aan het bestand:
			</p><code>
<span class="nieuwe_code">	score = 0</span>
			</code><p>
			In Scratch ziet het er zo uit:
			</p>
			<div class="gecentreerd"><img src="images/image20.png" /></div>
			<p>
			We willen natuurlijk de score kunnen zien, dus moeten we die in het scherm afdrukken. Voeg daarvoor in
			<code>love.draw(dt)</code> het volgende toe:
			</p><code>
<span class="commentaar">	-- zet de tekstkleur op wit</span>
<span class="nieuwe_code">	love.graphics.setColor(255, 255, 255)</span>
	
<span class="commentaar">	-- en druk de score af</span>
<span class="nieuwe_code">	love.graphics.print("SCORE: " .. tostring(score), 400, 10)</span>
			</code>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Stap 9: opnieuw starten</h3>
			<p>
			Mocht je een vijand aanraken, dan is het spel afgelopen, maar dan wil je natuurlijk wel opnieuw kunnen beginnen. 
			Daarvoor gaan we code toevoegen aan <code>love.update(dt)</code>:
			</p>
			<div class="gecentreerd"><img src="images/image10.png" /></div>
			<code>
<span class="commentaar">  -- als de o van opnieuw wordt ingedrukt</span>
<span class="nieuwe_code">  if love.keyboard.isDown('o') then</span>

<span class="commentaar">    -- wordt het spel opnieuw gestart</span>
<span class="nieuwe_code">    kogels = {}</span>
<span class="nieuwe_code">    vijanden = {}</span>
<span class="nieuwe_code">    score = 0</span>
<span class="nieuwe_code">    spelIsAfgelopen = false</span>

<span class="nieuwe_code">  end</span>
			</code><p>
			Als je op 'o' drukt begint je spel opnieuw. Het spel is nu klaar!
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Voorbereide functies</h3>
			<p>
			Bij het maken van het spelletje heb je gebruik gemaakt van een aantal voorbereide functies. 
			Als je je nu afvraagt hoe die functies zijn gemaakt, dan kun je eens kijken in bestand <code>functies.lua</code>.
			</p>

			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h3>Voorbeeld code</h3>
			<p>
			Mocht je nu ook nog een voorbeeld van de volledige code willen bekijken, dan moet je eens kijken in <code>voorbeeld.lua</code>.
			</p>
		</div>

		<div id="conclusie">
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h2>Conclusie</h2>
			<p>
			Het spelletje is af en je hebt geleerd hoe je vrij gemakkelijk een 2D shooter kunt maken met L&ouml;ve.
			</p>
		</div>

		<div id="vervolg">
			<div class="terug">
				<a title="terug naar inhoud" href="#inhoud"><i class="material-icons">arrow_upward</i></a>
			</div>
			<h2>Vervolg</h2>
			<p>
			Als je meer wilt maken met L&ouml;ve, dan zijn er meerdere instructies (in het Engels: tutorials) op het
			internet te vinden. Helaas zijn die wel vrijwel allemaal Engelstalig.
			</p><p>
			Een overzicht vind je op site van L&ouml;ve zelf: <a href="https://love2d.org/wiki/Category:Tutorials">https://love2d.org/wiki/Category:Tutorials</a>.
			</p>
		</div>


	<div class="footer">
		<div class="nijmegen">
			<a href="https://coderdojo-nijmegen.nl"><img
				src="https://coderdojo-nijmegen.nl/wp-content/uploads/2014/12/logo_coderdojo_nijmegen-e1419242204527.png" /></a>
		</div>
		<div class="github">
			<a
				href="https://github.com/coderdojonijmegen/love2d-shooter">
				<svg aria-hidden="true" class="octicon octicon-mark-github"
					height="24" version="1.1" viewBox="0 0 16 16" width="24">
					<path fill-rule="evenodd"
						d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
			</a>
		</div>
		<a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img
			alt="Creative Commons License" style="border-width: 0"
			src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />Dit
		werk is gelicenseerd met een <a rel="license"
			href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
			Commons Attribution-NonCommercial-ShareAlike 4.0 International
			License</a>.
	</div>
	</div>
</body>
</html>